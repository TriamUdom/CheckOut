language: php

php:
    - '7.0'
    - '7.1'

services:
  - mongodb

before_script:
    - cp .env.travis .env
    - mysql -e 'create database homestead_test;'
    - echo 'date.timezone = "Asia/Bangkok"' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
    - echo 'extension = "mongodb.so"' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
    - composer self-update
    - composer install --no-interaction
    - php artisan key:generate

script:
    - vendor/bin/phpunit
